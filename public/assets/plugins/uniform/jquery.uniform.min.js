/*

Uniform v1.8.0+f
Copyright Â© 2009 Josh Pyles / Pixelmatrix Design LLC
http://pixelmatrixdesign.com

Requires jQuery 1.3 or newer

Much thanks to Thomas Reynolds and Buck Wilson for their help and advice on
this.

Disabling text selection is made possible by Mathias Bynens
<http://mathiasbynens.be/> and his noSelect plugin.
<http://github.com/mathiasbynens/noSelect-jQuery-Plugin>.

Also, thanks to David Kaneda and Eugene Bond for their contributions to the
plugin.

This version (+f) is from fidian's forked repository until the changes can
get merged upstream.  See https://github.com/fidian/uniform

License:
MIT License - http://www.opensource.org/licenses/mit-license.php

Enjoy!

*/
(function(e,t){"use strict";function i(t){return t?e("<span />").text(t).html():""}function n(e,t){var i,n;for(i in t)t.hasOwnProperty(i)&&(n=i.replace(/ |$/g,".uniform"),e.bind(i,t[i]))}function o(e){var i;return e[0].multiple?!0:(i=e.attr("size"),i===t||1>=i?!1:!0)}function s(e,t,i){var n=e.val();""===n?n=i.fileDefaultHtml:(n=n.split(/[\/\\]+/),n=n[n.length-1]),t.text(n)}function a(e,t){e.removeClass(t.hoverClass+" "+t.focusClass+" "+t.activeClass)}function r(e,t,i){i?e.addClass(t):e.removeClass(t)}function l(e,t,i){var n=t.is(":checked");t.prop?t.prop("checked",n):n?t.attr("checked","checked"):t.removeAttr("checked"),r(e,i.checkedClass,n)}function c(e,t,i){r(e,i.disabledClass,t.is(":disabled"))}function u(e,t,i){switch(i){case"after":return e.after(t),e.next();case"before":return e.before(t),e.prev();case"wrap":return e.wrap(t),e.parent()}return null}function h(t,i,n){var o,s;return n||(n={}),n=e.extend({bind:{},css:null,divClass:null,divWrap:"wrap",spanClass:null,spanHtml:null,spanWrap:"wrap"},n),o=e("<div />"),s=e("<span />"),i.autoHide&&!t.is(":visible")&&o.hide(),n.divClass&&o.addClass(n.divClass),n.spanClass&&s.addClass(n.spanClass),i.useID&&t.attr("id")&&o.attr("id",i.idPrefix+"-"+t.attr("id")),n.spanHtml&&s.html(n.spanHtml),o=u(t,o,n.divWrap),s=u(t,s,n.spanWrap),n.css&&t.css(n.css),c(o,t,i),{div:o,span:s}}e.uniform={defaults:{activeClass:"active",autoHide:!0,buttonClass:"button",checkboxClass:"checker",checkedClass:"checked",disabledClass:"disabled",fileButtonClass:"action",fileButtonHtml:"Choose File",fileClass:"uploader",fileDefaultHtml:"No file selected",filenameClass:"filename",focusClass:"focus",hoverClass:"hover",idPrefix:"uniform",radioClass:"radio",resetDefaultHtml:"Reset",resetSelector:!1,selectAutoWidth:!1,selectClass:"selector",submitDefaultHtml:"Submit",useID:!0},elements:[]};var d=!0,p=[{match:function(e){return e.is("button, :submit, :reset, a, input[type='button']")},apply:function(t,o){var s,r,l;return r=o.submitDefaultHtml,t.is(":reset")&&(r=o.resetDefaultHtml),t.is("a, button")?r=t.html()||r:t.is(":submit, :reset, input[type=button]")&&(r=i(t.attr("value"))||r),l=h(t,o,{css:{display:"none"},divClass:o.buttonClass,spanHtml:r}),s=l.div,n(s,{mouseenter:function(){s.addClass(o.hoverClass)},mouseleave:function(){s.removeClass(o.hoverClass),s.removeClass(o.activeClass)},"mousedown touchbegin":function(){s.addClass(o.activeClass)},"mouseup touchend":function(){s.removeClass(o.activeClass)},"click touchend":function(i){var n;e(i.target).is("span, div")&&(t[0].dispatchEvent?(n=document.createEvent("MouseEvents"),n.initEvent("click",!0,!0),t[0].dispatchEvent(n)):t.click())}}),n(t,{focus:function(){s.addClass(o.focusClass)},blur:function(){s.removeClass(o.focusClass)}}),e.uniform.noSelect(s),{remove:function(){return t.unwrap().unwrap()},update:function(){a(s,o),c(s,t,o)}}}},{match:function(e){return e.is(":checkbox")},apply:function(e,t){var i,o,s;return i=h(e,t,{css:{opacity:0},divClass:t.checkboxClass}),o=i.div,s=i.span,n(e,{focus:function(){o.addClass(t.focusClass)},blur:function(){o.removeClass(t.focusClass)},"click touchend":function(){l(s,e,t)},"mousedown touchbegin":function(){o.addClass(t.activeClass)},"mouseup touchend":function(){o.removeClass(t.activeClass)},mouseenter:function(){o.addClass(t.hoverClass)},mouseleave:function(){o.removeClass(t.hoverClass),o.removeClass(t.activeClass)}}),l(s,e,t),{remove:function(){return e.unwrap().unwrap()},update:function(){a(o,t),s.removeClass(t.checkedClass),l(s,e,t),c(o,t)}}}},{match:function(e){return e.is(":file")},apply:function(t,i){function o(){s(t,d,i)}var r,l,d,p;return r=h(t,i,{css:{opacity:0},divClass:i.fileClass,spanClass:i.fileButtonClass,spanHtml:i.fileButtonHtml,spanWrap:"after"}),l=r.div,p=r.span,d=e("<span />").html(i.fileDefaultHtml),d.addClass(i.filenameClass),d=u(t,d,"after"),t.attr("size")||t.attr("size",l.width()/10),o(),n(t,{focus:function(){l.addClass(i.focusClass)},blur:function(){l.removeClass(i.focusClass)},mousedown:function(){t.is(":disabled")||l.addClass(i.activeClass)},mouseup:function(){l.removeClass(i.activeClass)},mouseenter:function(){l.addClass(i.hoverClass)},mouseleave:function(){l.removeClass(i.hoverClass),l.removeClass(i.activeClass)}}),e.browser.msie?n(t,{click:function(){t.trigger("change"),setTimeout(o,0)}}):n(t,{change:o}),e.uniform.noSelect(d),e.uniform.noSelect(p),{remove:function(){return t.siblings("span").remove(),t.unwrap(),t},update:function(){a(l,i),s(t,d,i),c(l,t,i)}}}},{match:function(e){if(e.is("input")){var t=e.attr("type").toLowerCase(),i=" color date datetime datetime-local email month number password search tel text time url week ";return i.indexOf(" "+t+" ")>=0}return!1},apply:function(e){var t=e.attr("type");return e.addClass(t),{remove:function(){e.removeClass(t)},update:function(){}}}},{match:function(e){return e.is(":radio")},apply:function(t,i){var o,s,r;return o=h(t,i,{css:{opacity:0},divClass:i.radioClass}),s=o.div,r=o.span,n(t,{focus:function(){s.addClass(i.focusClass)},blur:function(){s.removeClass(i.focusClass)},"click touchend":function(){var n=i.radioClass.split(" ")[0],o="."+n+" span."+i.checkedClass+":has([name='"+t.attr("name")+"'])";e(o).each(function(){var t=e(this),n=t.find(":radio");l(t,n,i)}),l(r,t,i)},"mousedown touchend":function(){t.is(":disabled")||s.addClass(i.activeClass)},"mouseup touchbegin":function(){s.removeClass(i.activeClass)},"mouseenter touchend":function(){s.addClass(i.hoverClass)},mouseleave:function(){s.removeClass(i.hoverClass),s.removeClass(i.activeClass)}}),l(r,t,i),{remove:function(){return t.unwrap().unwrap()},update:function(){a(s,i),l(r,t,i),c(s,t,i)}}}},{match:function(e){return e.is("select")&&!o(e)?!0:!1},apply:function(t,i){var o,s,r,l,u;return l=t.width(),o=h(t,i,{css:{opacity:0,left:"2px",width:l+32+"px"},divClass:i.selectClass,spanHtml:(t.find(":selected:first")||t.find("option:first")).html(),spanWrap:"before"}),s=o.div,r=o.span,i.selectAutoWidth?(s.width(e("<div />").width()-e("<span />").width()+l+25),u=parseInt(s.css("paddingLeft"),10),r.width(l-u-15),t.width(l+u),t.css("min-width",l+u+"px"),s.width(l+u)):(u=t.width(),s.width(u),r.width(u-25)),n(t,{change:function(){r.html(t.find(":selected").html()),s.removeClass(i.activeClass)},focus:function(){s.addClass(i.focusClass)},blur:function(){s.removeClass(i.focusClass),s.removeClass(i.activeClass)},"mousedown touchbegin":function(){s.addClass(i.activeClass)},"mouseup touchend":function(){s.removeClass(i.activeClass)},"click touchend":function(){var e=t.find(":selected").html();r.html()!==e&&t.trigger("change")},mouseenter:function(){s.addClass(i.hoverClass)},mouseleave:function(){s.removeClass(i.hoverClass),s.removeClass(i.activeClass)},keyup:function(){r.html(t.find(":selected").html())}}),e.uniform.noSelect(r),{remove:function(){return t.siblings("span").remove(),t.unwrap(),t},update:function(){a(s,i),r.html(t.find(":selected").html()),c(s,t,i)}}}},{match:function(e){return e.is("select")&&o(e)?!0:!1},apply:function(e){return e.addClass("uniform-multiselect"),{remove:function(){e.removeClass("uniform-multiselect")},update:function(){}}}},{match:function(e){return e.is("textarea")},apply:function(e){return e.addClass("uniform"),{remove:function(){e.removeClass("uniform")},update:function(){}}}}];e.browser.msie&&7>e.browser.version&&(d=!1),e.fn.uniform=function(t){var i=this;return t=e.extend({},e.uniform.defaults,t),t.resetSelector!==!1&&e(t.resetSelector).mouseup(function(){window.setTimeout(function(){e.uniform.update(i)},10)}),this.each(function(){var i,n,o,s=e(this);if(s.data("uniformed")&&e.uniform.update(s),!s.data("uniformed")&&d)for(i=0;p.length>i;i+=1)if(n=p[i],n.match(s,t))return o=n.apply(s,t),s.data("uniformed",o),e.uniform.elements.push(s.get(0)),void 0})},e.uniform.restore=function(i){i===t&&(i=e.uniform.elements);var n=e(i);n.each(function(){var t,i,n=e(this);i=n.data("uniformed"),i&&(i.remove(),n.unbind(".uniform"),t=e.inArray(this,e.uniform.elements),t>=0&&e.uniform.elements.splice(t,1),n.removeData("uniformed"))})},e.uniform.noSelect=function(t){var i=function(){return!1};e(t).each(function(){this.onselectstart=this.ondragstart=i,e(this).mousedown(i).css({MozUserSelect:"none"})})},e.uniform.update=function(i){i===t&&(i=e.uniform.elements);var n=e(i);n.each(function(){var t,i=e(this);t=i.data("uniformed"),t&&t.update(i,t.options)})}})(jQuery);